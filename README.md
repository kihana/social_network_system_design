# Социальная Сеть для Путешественников

## Функциональные Требования
- публикация постов о путешествиях. Каждый пост:  
  - содержит фотографии
  - содержит описание
  - связан с конкретным местом
- оценка и комментирование постов
- подписка на других путешественников, чтобы следить за их активностью
- поиск популярных мест для путешествий и просмотр публикаций, связанных с этими местами
- просмотр ленты других путешественников и ленты пользователя, основанной на подписках в обратном хронологическом порядке

## Нефункциональные Требования
- 10 000 000 DAU
- аудитория стран СНГ
- данные хранятся всегда
- активность пользователей:
  - в среднем пользователи публикуют 20 (максимум 5 постов за каждое путешествие, в среднем 4 путешествия в год) постов в год или 0.05 постов в день 
  - в среднем просмотр 15 постов в день
  - 10% оценок и 1% комментариев от просмотра постов
  - в среднем делают по 5 запросов поиска мест
  - 3 раза в день будет входить в сеть, соответственно 3 раза в день надо сформировать ленту
  - в среднем открывают 3 ленты других пользователей
  - в среднем делается по 3 подписки в день
- лимиты:
  - максимум 30 фото на пост
  - размер фото максимум 3МБ
  - максимум 5000 символов на пост
  - публиковать не более 50 постов в день
  - максимум 500 комментариев в день
  - максимум 1000 оценок в день
  - максимум 500 подписок в день
- сезонность присутствует: летний (июнь-август), зимний (декабрь-январь)
- тайминги:
  - публикация поста - 3 секунды
  - оценка и комментарий - 1 секунда
  - отобржение результатов поиска - 2 
  - показать первую страницу ленты - 2 секунды
  - подписка - 1 секунды
- поддержка мобильных телефонов и браузеров

## Нагрузка
- RPS (чтение) ~ 3000
  - RPS (просмотр постов - чтение) - 10 000 000 * 15 / 86 400 = 1736
  - RPS (поиск мест - чтение) - 10 000 000 * 5 / 86 400 = 579
  - RPS (формирование своей ленты - чтение) - 10 000 000 * 3 / 86 400 = 347
  - RPS (формирование чужой ленты - чтение) - 10 000 000 * 3 / 86 400 = 347

- RPS (запись) ~ 545
  - RPS (публикация постов - запись) - 10 000 000 * 0.05 / 86 400 = 6
  - RPS (оценка постов - запись) - 10 000 000 * (15 * 10 / 100) / 86 400 = 174
  - RPS (комментирование постов - запись) - 10 000 000 * (15 * 1 / 100) / 86 400 = 17
  - RPS (подписка - запись) - 10 000 000 * 3 / 86 400 = 347

## Трафик
  - Наброски структуры данных:
      - Оценка: = 32 B
      - id поста - 8 B
      - id пользователя - 8 B
      - оценка: 1-5 - 8 B
      - время - 8 B
    
    - Комментарий: ~ 1 KB
      - id комментатора - 8 B
      - текст ~ 1000 B
      - время - 8 B

    - Подписка: = 20 B
      - id подписчика - 8 B
      - id на кого подписываются - 8 B
      - действие: подписаться/отписаться - 1 B

    - Пост: ~ 92 MB
      - 30 фото * 3МБ = 90 МB
      - 5000 символов = 5 КB
      - метаинформация (id, пользователь, дата публикации, локация,...) = 1 KB
      - 1000 комментариев ~ 1 MB
      - средняя оценка = 32 B

    - Тизер поста: ~ 500 KB
      - метаинформация (id, пользователь, дата публикации, локация,...) = 1 KB
      - текстовое содержимое 500 символов ~ 500 B
      - фото (сжатое) ~ 400 KB
      - средняя оценка = 32 B

    - Локация: ~ 10 MB
      - метаинформация (id, название, адрес, координаты,...) ~ 1KB
      - 20 тизеров постов по 500 KB ~ 20 * 500 KB = 10 000 KB ~ 9.8 MB

- RPS (чтение) ~ 166 GB/s
  - RPS (просмотр поста - чтение) - 1736 * 92 MB = 159 712 MB/s = 156 GB/s
  - RPS (поиск мест - чтение) - 579 * 10 MB = 5790 MB/s = 5.6 GB/s
  - RPS (формирование своей ленты - чтение) - 347 * 20 (количество тезеров в ленте) * 500 KB = 3 470 000 KB = 3.3 GB/s
  - RPS (формирование чужой ленты - чтение) - --//-- = 3.3 GB/s

- RPS (запись) ~ 550 MB/s
  - RPS (публикация поста - запись) - 6 * 91 MB = 546 MB/s
  - RPS (оценка постов - запись) - 174 * 32 B = 5 568 B/s = 5.4 KB/s
  - RPS (комментирование постов - запись) - 17 * 1 KB/s = 17 KB/s
  - RPS (подписка - запись) - 347 * 20 B = 6 940 B/s = 6.8 KB/s